<%!
# retrieve settings
isLite = (cherrypy.config['product_type'] == 'lite' or cherrypy.config['product_type'] == 'lite_free')

if cherrypy.config['product_type'] == 'hunk':
    faviconFile = 'favicon_hunk.ico'
elif isLite:
    faviconFile = 'favicon_lite.ico'
else:
    faviconFile = 'favicon.ico'

faviconFilePath = '/static/img/' + faviconFile

config_qs = dict(autoload=1)
if hasattr(cherrypy.request, 'embed') and cherrypy.request.embed:
    config_qs['embed'] = 1
%>\

<%
''' Page-level execution. Executed once per load '''
minify_js = splunk.util.normalizeBoolean(cherrypy.config.get('minify_js'))
minify_css = splunk.util.normalizeBoolean(cherrypy.config.get('minify_css'))

app_name = app

splk_root = "/static"
splk_css_build = splk_root + "/css/build"
splk_js = splk_root + "/js"
splk_js_contrib = splk_js + "/contrib"
splk_js_profiles = splk_js + "/profiles"

app_root = "/".join([splk_root,"app",app_name])
app_img = app_root + "/img"

app_js = app_root + '/js'
app_js_pages = app_js + "/pages"
app_js_profiles = app_js + "/profiles"
app_js_contrib = app_js + '/contrib'

app_less = app_root + "/less"

app_js_build = app_root + '/js/build'
app_css_build = app_root + '/css'

pageJSName = page+'_page'

# optimized js and css
# app_css ="%s/common.css" % app_css_build
app_css ="%s/%s.css" % (app_css_build, page)
splunk_css = "%s/bootstrap.min.css" % splk_css_build
page_css = "%s/pages/%s/bootstrap.css" % (app_css_build ,str(page))

page_common_js = "%s/common.js" % app_js_build
page_js = "%s/%s.js" % (app_js_build ,pageJSName)
page_less = "%s/pages/%s/bootstrap.less" % (app_less ,page)

%>\

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>-->
</head>
<body>
    <h3>Configure Environment for Splunk Checker</h3>

    <p>Cluster ID</p>
    <input id="cluster_id">

    <p>Please input splunk uri (e.g. https://systest-auto-idx1:1901):</p>
    <input id="splunk_uri">

    <p>Username:</p>
    <input id="username">

    <p>Role:</p>
    <form action="action_page.php">
      <select name="role">
        <option value="master">Master</option>
        <option value="indexer">Indexer</option>
        <option value="searchhead">Search Head</option>
        <option value="forwarder">Forwarder</option>
      </select>
      <br><br>
    </form>

    <p>Password:</p>
    <input id="password">

    <!--Splunk will put the files under appserver/static/ to someplace like this-->
    <!--<script src="/static/app/splunk-checker/configuration.js"></script>-->
    <script src="${make_url('/config', _qs=config_qs)}"></script>
    <script src="${make_url('/static/js/i18n.js')}"></script>
    <script src="${make_url('/i18ncatalog?autoload=1')}"></script>
    <script src="${make_url(splk_js_contrib + '/require.js')}"></script>
    <script src="${make_url(splk_js_profiles + '/shared.js')}"></script>
    <script>
        require.config({
            baseUrl: "${make_url('/static/js')}",
            shim: {
                'bootstrap': {
                    deps: ['jquery']
                },
                'select2': {
                    deps: ['jquery']
                }
            },
            paths: {
                'app': '../app/${app_name}/js',
                'lib': '../app/${app_name}/js/lib',
                'bootstrap': '../app/${app_name}/bootstrap/js/bootstrap.min',
                'select2': '../app/${app_name}/js/lib/select2-3.5.2'
            },
            enforceDefine: false,
            // paths: {'app': '../app/${app_name}/js'},
            waitSeconds: 0
        });
    </script>
    <!--<script src="/en-US/static/@6fafc53a3966/js/profiles/shared.js"></script>-->
    <script>
        require(['jquery'], function($){
            $(document).ready(function(){
                $("button").click(function(){
                    $.ajax({
                        url:"/en-US/splunkd/__raw/servicesNS/nobody/splunk-checker/splunk_checker/store_cluster_info?output_mode=json",
                        type: 'POST',
                        data: {
                            name: "Donald Duck",
                            city: "Duckburg"
                        }
                    });
                });
            });
        });

    </script>
    <button type="button">Add peer!</button>
    <p id="add_success"></p>
</body>
</html>

<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
    <!--<meta charset="utf-8">-->
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">-->
    <!--<title>Login Tests</title>-->
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->

    <!--&lt;!&ndash;<link rel="stylesheet" type="text/css" href="static/splunkjs/css/bootstrap.css"/>&ndash;&gt;-->
    <!--<style type="text/css">-->
        <!--.fail{-->
            <!--color: red;-->
        <!--}-->
        <!--.main-area {-->
            <!--padding: 30px;-->
        <!--}-->
    <!--</style>-->
<!--</head>-->

<!--<body>-->
<!--<div class="main-area">-->
    <!--<h2>Login Form</h2>-->
    <!--<p>This page tests login and authentication. When you enter a-->
        <!--name and password, these credentials are used to log in-->
        <!--to Splunk.</p>-->
    <!--<p>If login is successful, a session key is returned and stored-->
        <!--in a cookie, along with the username.</p>-->
    <!--<br>-->
    <!--<p><b>Username:</b></p>-->
    <!--<input id="usernamebox" type="text" value="admin">-->
    <!--<p><b>Password:</b></p>-->
    <!--<input id="pwbox" type="password" value="changeme">-->
    <!--<br>-->
    <!--<button class="btn" onclick="onLogin()">Log in</button>-->
    <!--<br>-->
    <!--<div id="errorText"></div>-->
<!--</div>-->

<!--<script src="/en-US/config?autoload=1"></script>-->
<!--<script src="/en-US/static/@6fafc53a3966/js/i18n.js"></script>-->
<!--<script src="/en-US/i18ncatalog?autoload=1"></script>-->
<!--<script src="/en-US/static/@6fafc53a3966/js/build/simplexml.min/config.js"></script>-->

<!--<script type="text/javascript">-->
    <!--require.config({-->
        <!--baseUrl: "/en-US/static/@6fafc53a3966/js"-->
    <!--});-->

    <!--function onLogin() {-->
        <!--require([-->
            <!--"jquery",-->
            <!--"splunkjs/splunk"-->
        <!--], function($, jssdk) {-->
            <!--// Get the username and passwords-->
            <!--var username = $("#usernamebox").val();-->
            <!--var password = $("#pwbox").val();-->

            <!--// Use the Splunk SDK for JavaScript to log in to Splunk-->

            <!--// Create a Service object-->
            <!--var http =  new jssdk.ProxyHttp("/proxy");-->
            <!--var service = new jssdk.Service(http, {-->
                <!--username: username,-->
                <!--password: password,-->
                <!--scheme: "https",-->
                <!--host: "localhost",-->
                <!--port: 8089-->
            <!--});-->
            <!--// Log in to Splunk-->
            <!--service.login(function(err) {-->
                <!--// The session key and username are required for logging in-->
                <!--if (!err) {-->
                    <!--var key = service.sessionKey;-->
                    <!--// Save the session key and username in cookies-->
                    <!--$.cookie("splunk_sessionkey", key);-->
                    <!--$.cookie("splunk_username", username);-->
                <!--}-->
                <!--else {-->
                    <!--$("#errorText").empty().append("<p class='fail'><br>Login failed! See the console for error info.</p>");-->
                    <!--console.error("Login failed: ", err);-->
                <!--}-->
            <!--});-->
        <!--});-->
    <!--}-->
<!--</script>-->
<!--</body>-->
<!--</html>-->